---
layout: post
title: دامەزرادنی خزمەتگوزاری DNS Server لە لینوکس
tags: [ڕاژە]
date : "2017-01-29 05:35:45"
---

##### پێشەکی

هەروا کە دەزانن کاتێک دەچنە نێو ماڵپەڕێک دەبێ ئادرەس یان ناونشانی ئەو ڕاژەی ماڵپەرە بزانن واتە ئای-پی ـیەکەی (IP Address) . لەبەرکردنی ئەم ناونیشانەی IPـی بۆ تەواوی ئەو ماڵپەڕانە کە سەردانیان دەکەین زۆر دشوارە.باش وایە بە جێگای لەبەرکردن و نووسینی ناونیشانی IP دۆمەینەکە، لە خزمەتگوزاری نێوی دۆمەینەکە واتە DNS سوودبگرین، واتە ناوی ماڵپەڕ بزانین و لەبەری بکەین.ئەم خزمەتگوزارییە (DNS)،ئادرەسی ئای پی ماڵپەڕەکە یان ڕاژەی ماڵپەرەکەمانبە ناوی ماڵپەڕەکە وەردەگێڕێت.
لەم فێرکارییە بە دامەزرادنی نەرمەکالای bind بۆ ئەم خزمەتگوزارییە لە لینوکس ئاشنا دەبین.
سەرەتا بە فەرمانی خوارەوە خزمەتگوزاری bind دادەمەزرێنین.

##### دامەزراندنی لە دێبیان

بۆ دابەشکراوەکانی دێبیان لەم فەرمانە:

```shell
sudo apt install bind9 
```

##### دامەزراندنی لە ڕێدهەت

بۆ دابەشکراوەکانی رێدهەت بەم فەرمانە:

```shell
sudo yum install bind  
```

##### ناساندنی zone

بۆ ناساندنی zone، سەرەتا دەبێ فایلی خوارەوە دەستکاری بکەین:

```shell
sudo nano /etc/bind/named.conf.local  
```

ئینجا ئەم دەقەی خوارەوەی بۆ زیاد بکەن :

```shell
zone “qezwan.ir” {  
    type master;  
    file “/etc/bind/db.qezwan.ir”;  
};  
```

لەدەقەکەی سەرەوە نێوی دۆمەینی ئێمە qezwan.ir وە لەجۆریmaster ـە.
ئینجا دەبێ دانەیێک zone فایل بۆ دۆمەینەکەمان بنووسین. بۆ ئەم کارە وەک دەقی خوارەوە کردار دەکەین :

```shell
cd /etc/bind  
cp db.empty db.qezwan.ir  
```

ئەو فایلە کە درووستمانکردووە بە دەستکاریکەرێکی دەق دەستکاری دەکەین :

```shell
sudo nano /etc/bind/db.qezwan.ir  
```

هاورێێان لەسەرەتاوە ناوەڕۆکی ئەم فایلە بەم جۆرەیە :

```shell
$TTL 86400

@ IN SOA localhost. root.localhost. (  
    1 ; Serial  
    604800 ; Refresh  
    86400 ; Retry  
    2419200 ; Expire  
    86400 ) ; Negative Cache TTL  
;  
@ IN NS localhost.  
```

دەبێت بە جێگی localhost ناوی دۆمەینەکەی خۆمانی بۆ بنووسین ، بەم جۆرە:

```shell
$TTL 86400

@ IN SOA qezwan.ir. admin.qezwan.ir. (  
    1 ; Serial  
    604800 ; Refresh  
    86400 ; Retry  
    2419200 ; Expire  
    86400 ) ; Negative Cache TTL  
;

@ IN NS qezwan.ir. 
```

لە دەقەکەی سەرەوە qezwan.ir. نێوی دۆمەینی ئێمە وە admin.qezwan.ir. ئادرەسی ئیمەیلی بەرێوەبەری ڕاژیە.
پاش گۆڕانکارییەکانی سەرەوە دەبێت رکوردەکانی ڕاژەکان لە دوایین هێڵەکان وەک وێیەی خوارەوە زیاد بکەین:

```shell
ns IN A 104.28.12.99

qezwan.ir. A 104.28.12.99  
www CNAME qezwan.ir.  
host1 A 104.28.12.199  
host2 A 104.28.12.200
```

لەدەقەکەی سەرەوە لە هێڵی چوارەم ناونیشانی وێبی سێرڤێرەکەمان دابینکردووە که لە ڕاستی ناوێکی ساختە بۆ qezwan.ir ـە.
هەر وا لە هێڵەکانی پینج و شەس دوو هاست یان ڕاژە بە ناونیشانی host1.qezwan.ir و host2.qezwan.irـمان دابینکردووە.
پاش دەستکاری و پاشکەوتکردی فایلەکەی سەروە دەبێت بە نەرمەکلای named-checkzone بدرووستی کردارەکەمان تاقی بکەینەوە.کە دەبیت فەرمانەکەی خوارەوە بەکار بهێنین :

```shell
named-checkzone qezwan.ir /etc/bind/db.qezwan.ir  
```

ئیستا کاتێک کە فەرمانەکەی سەرەوەمان نووسی وە ئاشکرا بوو کە هیچ کێشەیێکمان نییە، دەرهاتی خوارەوەمان بۆ دیار دەکرێت:

```shell
zone qezwan.ir/IN: loaded serial 1  
OK 
```

دەبێت bind هەڵگرسێنین واتە بەم فەرمانە :

```shell
sudo systemctl restart bind9  
```

فەرمانی dig بۆ تاقیکردنەوەی ڕاژەکانمان :

```shell
dig @104.28.12.99 [www.qezwan.ir](http://www.qezwan.ir/)  
```

`خاڵ `:بۆ سوودوەرگرتن لە فەرمانی dig دەبێت پاکەتی dnsutils دامەزرێنین.