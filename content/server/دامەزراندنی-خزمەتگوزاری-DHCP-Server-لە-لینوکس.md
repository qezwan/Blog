---
layout: post
title: دامەزراندنی خزمەتگوزاری DHCP Server لە لینوکس
tags: [ڕاژە]
date : "2017-02-01 05:35:45"
---

##### پێشەکی

هەر وا کە دەزانن دوو کۆمپیوتر لە تۆڕ بۆ پەیوەندی گرتن بە یەکەوە پێویستیان بە IP ئادرەسێکی یەکتا هەیە، کە تایبەت بە خۆیان بێت. بە گشتی لە تۆر بۆ ڕاژە بە دوو رێگا ئەم ئادرەسە بەدەست دێت :

- **سازکردن بە شێوازی دەستی:** لەم رێگا دەبێ لەسەر هەموو کۆمپیوترەکانی (کلاینێتەکان) لە تۆڕ IP بە شێوازی دەسی بنووسرێت.
- **وەرگرتنی خۆکارانە:** لەم رێگا سوود لە دەروازە یان پرۆتۆکۆلی DHCP، کە کۆمپیوترەکانی تۆڕ (کلاینێتەکان) داوای IP لێ دەکەن .ئەم داواکارییە لە لایەن خزمەتگوزارێک بە ناوی DHCP لە تۆر وەڵام دەدرێتەوە.

##### ئیشی DHCP

بە یارمەتی پرۆتۆکۆلی DHCP ئەم خاڵانەی خوارەوە بە شێوازی خۆکارانە لەسەر ڕاژەکەتان رێکبخەن.

1. ئادرەس یان ناونیشانیIP وە Subnet.
2. ناونیشانی خزمەتگوزاری (DNS).
3. ناونیشانی دەروازەی تۆڕ (Gateway).
4. ناونیشانی Wins Server (بۆ کۆمپیوترەکانی مایکرۆسۆفت)
5. وە … .
   لەم فێرکارییە بە شیوازی دامەزراندن و رێکخستنی DHCP لە لینوکس ئاماژە دەکەین.
   بۆ  دامەزراندنی خزمەتگوزاری DHCP لە ڕاژە بە شێوازی خوارەوە کردار دەکەین:
   بۆ دابەشکراوەکانی دێبیان لەم فەرمانە:

```shell
apt-get install dhcp3-server  
```

##### بۆ ڕێدهەت

بۆ دابەشکراوەکانی رێدهەت بەم فەرمانە:

```shell
yum install dhcp  
```

بە شیوازی پێشگریمان خزمەتگوزاری DHCP هیچ رێکخستنێکی بۆ ئەنجامی ئەم خزمەتگوزارییە لە تۆڕ نییە که دەتوانین بە دەستکاری فایلی etc/dhcp/dhcpd.conf/ ئەم خزمەتگوزارییە چالاک بکەین.
بۆ ناسندنی Subnet ،بۆ نیشاندانی ئەم خزمەتگوزارییە لە نێوی دەبیت ئەم هێڵانەی خوارەوە بە فایلی dhcpd.conf زیاد بکەین.
بۆ وێنە:

```shell
subnet 10.1.1.0 netmask 255.255.255.0 {    
  range 10.1.1.3 10.1.1.254;    
}  
```

لێرە ئێمە subnet ـیکمان بە ناونیشانی 10.10.10.0 وە mask بە ئادرەسی 255.255.255.0 ناساندووە. هەروا بە وشەی range دەتوانین مەودای IP دابینکراوە لە لایەن ڕاژە دابین بکەین. لە وێنەی سەرەوە لە ئادرەسی 10.1.1.3 تاکوو 10.1.1.254 توانایی ئادرەسدانی هەیە لەم subnet ـەمان.
ئازیزان تا ئیرە ڕاژەی ئێمە بۆ دانانی IP ئامادە بووە. بەڵام سیستەمەکانی تۆر بۆ ئادرەسی IP پێویستیا بە رێکخستنی DNS وە هەروەها ئادرەسی Gateway تۆڕ هەیە. بۆ زیادکردنی ئەم دوو ئادرەسە بە شێوازی خوارەوە کردار دەکەین :

```shell
subnet 10.1.1.0 netmask 255.255.255.0 {    
  range 10.1.1.3 10.1.1.254;    
  option domain-name-servers 10.1.1.1, 8.8.8.8;    
  option routers 10.1.1.1;    
} 
```

لە دەقەکەی سەرەوە: ڕەستەی option domain-name-servers ناونیشانی خزمەتگوزاری DNS دابین دەکات و ڕەستەی option routers ناونیشانی Gateway تۆر دابین دەکات.
`خاڵ)‌` ئادرەسەکانی ئەم خزمەتگوزارییە بە شێوازی leased دەردەکەون پاش تەواو بوونی کاتی پێشگریمان یا ناسراوە لە ڕاژە، ئەو ئادرەسە لە کلاینێت دەسێنریتەوە و بە هۆی ماهییەتی dynamic دەرگا یان پرۆتۆکل ،ئەو ئادرەسە کە بە هاستەکەی ئێوە تایبەتکراوە بە هاستێکی دیکە دەدرێت.
بۆ گۆڕانی کاتی پێشگریمانی موڵەتدانەکە (lease) دەتوانن بەم شێوازە کردار بکەن:

```shell
  default-lease-time 600;    
max-lease-time 7200;

subnet 10.1.1.0 netmask 255.255.255.0 {    
  range 10.1.1.3 10.1.1.254;    
} 
```

لە دەقەکەی سەرەوە، بەرابەری ڕەستەی default-lease-time مەودای کاتی ئیجارەدانی پێشگریمانی ڕێکخستنەکان و max-lease-time زۆرینەی مەودای کاتی پێشگریمانی رێکخستنەکان بە چرکە نیشان دەدرێت.
شایەد ئێوە گەرەکتان بێت لەسەر هاستێکی تایبەت لە تۆر (بۆ وێنە: چاپکەری تۆڕ ) ئادرەسی IP یێک لە نۆبە(ڕێزێرڤ)، چاوەڕوان بکەن تا هەمیشە ئەو ئادرەسە بۆ هاستی داخوازتان دابین بکرێت.بەم جۆرەی خوارەوە:

```shell
host printer {    
  hardware ethernet 00:16:d3:b7:8f:86;    
  fixed-address 10.1.1.100;    
}  
```

لەدەقەکەی سەرەوە، host ناوی هاستی داخوزی ئێوە دابین دەکات. وشەی hardware ethernet ناونیشانی لایەری ۲ یان mac Address هاستەکەتا دابین دەکات .لە کوتایی fixed-address ئادرەسێکە کە گەرەکتانە هاستەکەتانی بۆ چاوەڕوان یان ڕێزێرڤی بکەن.(لەنۆبە دایبنن)
لە کۆتایی خزمەتگوزاریDHCP بارێک restart بکەن.

```shell
/etc/init.d/isc-dhcp-server restart
```