---
layout: post
title: ئاسایشی Apache2 بە دامەزراندنی Let’s Encrypt لە سەر ئوبونتو
tags: [ڕاژە]
date : "2018-10-14 05:35:45"
---

##### **پێشەکی :**

چۆن ئاسایشی ڕاژەی وێبی Apache2 بە دامەزراندنی بەڵگەنامەی TLS/SSL بپارێزین؟ ئەم کارە بە چەندین ڕێگا ئەنجام دەدرێ.هەرچەندە کە تەواو بەڵگەنامەکان، یەک ئامانجیان هەیە، ئەویش ئاسایشی زانیاریەکان لە نێو تۆڕە.لەم فێرکارییە کورتە بە ئێوە نیشاندەدرێ کە بێ هیچ پارەیێک ئاسایشی Apache2 بپارێزن و بەهێزی بکەن.
ئێمە سود لە بەڵگەنامەی [Let’s Encrypt ](https://letsencrypt.org/)دەگرین کە پارێزگاری دەکا لە ڕاژە وێبی ئاپاچی بە بڕوانامەیێکی خۆڕایی و ڕاستەقینە.

##### **قۆناغی یەک :دامەزراندنی پشتپێبەستەکانی ڕاژە**

پێش ئەوە کە Let’s Encrypt دامەزرێنن ئێوە دەبێ پشتپێبەستەکانی ڕاژەی ئوبونتو دامەزرێنن.بۆ ئەمە دەبێ ڕاژە بەڕۆژ بکەنەوە.

```shell
sudo apt-get update
```

بۆ دامەزراندی پاکەتەکان “Let’s Encrypt”، پێویستمان بە داگرتن و دامەزراندنی گیت(git)ە :

```shell
sudo apt-get install git
```

##### **قۆناغی دووەم : دامەزراندنی ڕاژە خوازی Let’s Encrypt**

لەم قۆناغە ئێمە دەبێ ڕاژەخوازی لێتس ئینکریپت(Let’s Encrypt) لە گانگای گیت دابگرین.بەڵام ئەم داگرتنە دەبێ لە بوخچەی opt/ بێت. ئەم شوێنە بۆ داگرتن گونجاوە.

```shell
sudo git clone https://github.com/letsencrypt/letsencrypt /opt/letsencrypt
```

بڕۆنە نێو بوخچەی “Let’s Encrypt” پەیکەرسازی دەستپێ بکەن :

```shell
cd /opt/letsencrypt
```

##### **قۆناغی سێهەم :دامەزراندنی بڕوانامەی SSL نوێ بۆ ماڵپەڕەکەت**

لەم قۆناغە بەڵگەنامەی SSL بۆ ماڵپەرەکەمان درووستدەکەین.بۆ دروستکردنی بڕوانامەی نوێ فەرمانەکەی خوارەوە جێبەجێ دەکەین.ئەم ئاسایشەو بەڵگە نامە تەنها بۆ ماڵپەڕی **example.com** ئەنجام دەبێ.

```shell
./letsencrypt-auto --apache -d example.com
```

هەرچەند کە لە ئەمرۆکە، ناونیشانی ماڵپەڕ بە دوو جۆری **example.com** وە **www.example.com** دەردەکەوێ ئێمەش بۆ ئەم دوو جۆرە بە فەرمانەکەی خوارەوە بەڵگەنامە جێبەجێ دەکەین.

```shell
./letsencrypt-auto --apache -d example.com -d www.example.com
```

گەر کێشەیێک لە بڕوانامە بۆ ئەم جۆرە دۆمەینە بوو **www.example.com** بچنە نێو پەڕگەی پەیکەرسازی Apache2 و ئینجا ناونیشانی www.example.com پێ زیاد بکەن.شێوازەکە بەم جۆرەیە :

```shell
sudo nano /etc/apache2/sites-enabled/000-default.conf
```

هێڵەکەی خوارەوە زیاد بکەن،هەر وا دڵنیا بن کە CNAME لە ڕاژەی DNSەکەتان ناسراوە.

```shell
ServerName   example.com
 ServerAlias  www.example.com
```

گۆڕانکاریەکانتان پاشکەوت بکەن،دڵنیا بن کە دەستکاریەکانتان سەرکەوتوو بووث.هیوادارم سەرکەوتوو ببن. دەبێ شێوازی ناونیشانی ماڵپەڕەکەتان بۆ بەڵگەنامەی SSLبگۆڕن.ئێستا ماڵپەڕەکەی ئێوە بەڵگەنامەیێکی ئاسایشی هەیە.
ئەڵبەت هەر سێ مانگ دەبێ ئەم بڕوانامە یا بەڵگەنامە شارژبکەنەوە.ئەم کارەش زۆر سادەیە.بە فەرمانەکەی خوارەوە ئێمە بەڵگەنامەی SSL بۆ سێ مانگی دیکە شارژ دەکەینەوە.

```shell
cd /opt/letsencrypt
 ./letsencrypt-auto renew
```

گەر ئێوە گەرکتانە ئەم کارە هەموو سێ مانگ دووپات بکەنەوە دەبێ بە شوێن کردارێکی پەیکەرسازی لە سەر cron job بگەڕێن، کە بە شێوازی خۆکارانە ئەم کارەتان هەر سێ مانگ بۆ ئەنجام بدا.

```shell
sudo crontab -e
```

ئەتوانن یەکێک لەم سێ دەستکاریکەرە هەڵبژێرن :

1. /bin/ed/
2.  bin/nano/ —->> سادەترە(پێشنیارە)
3. usr/bin/vim.tiny/

ئینجا ئەم هێڵەی پێ زیاد بکەن :

```shell
00 0 * * 0 /opt/letsencrypt/letsencrypt-auto renew >> /var/log/le-renew.log
```

ئێستا شارژی بڕوانامەی SSL بە شێوازی خۆکارانەیە.
بە هیوای سەرکەوتن.

سەرچاوە: [websiteforstudents](https://websiteforstudents.com/how-to-use-lets-encrypt-to-secure-apache2-on-ubuntu/)